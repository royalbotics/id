<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Ro&Bot™ ID – Login</title>
<link rel="icon" href="https://i.ibb.co/Jw6dV46h/favicon.png" type="image/png">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">

<style>
:root {
  --platinum-bg: linear-gradient(145deg, #f9f9f9, #f0f0f0, #f4f4f4);
  --accent: #c4a484;
  --text: #111;
  --muted: #555;
}

* { box-sizing:border-box; margin:0; padding:0; font-family:'Poppins', sans-serif; }

body {
  height:100vh;
  width:100vw;
  background: var(--platinum-bg);
  display:flex;
  justify-content:center;
  align-items:center;
  color: var(--text);
  overflow:hidden;
  position:relative;
}

/* MAIN FULL-PAGE FORM */
.main-container {
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  text-align:center;
  width:100%;
  max-width:480px;
  padding:0 20px;
  animation: fadeIn 0.8s ease;
}

/* LOGO + ID */
.logo-id {
  display:flex; align-items:center; justify-content:center; gap:12px; margin-bottom:12px;
}
.logo-id img { 
  height:50px; 
}
.logo-id span {
  font-size:2.6rem;
  font-weight:700;
  color: var(--text);
}

/* LOGIN/SUBTITLE */
.subtitle {
  font-size:1.4rem;
  color: var(--muted);
  margin-bottom:40px;
}

/* STEP INDICATOR */
.step-indicator {
  display:flex; justify-content:center; gap:8px; margin-bottom:28px;
}
.step-dot {
  width:8px; height:8px; border-radius:50%;
  background: rgba(196,164,132,0.3);
  transition: all 0.3s;
}
.step-dot.active {
  background: var(--accent);
  transform: scale(1.3);
}

/* INPUTS WITH FLOATING LABEL */
.form-group {
  position: relative;
  margin-bottom: 22px;
  width:100%;
}
.form-group input {
  width:100%;
  padding:18px 16px;
  border:none;
  border-bottom:1px solid rgba(0,0,0,0.1);
  font-size:1rem;
  background: transparent;
  color: var(--text);
  transition: all 0.3s;
}
.form-group input::placeholder { color: transparent; }
.form-group input:focus {
  border-bottom:2px solid var(--accent);
  outline:none;
}
.form-group label {
  position:absolute;
  left:16px;
  top:50%;
  transform:translateY(-50%);
  color:var(--muted);
  font-size:0.9rem;
  transition:0.25s;
  pointer-events:none;
}
.form-group input:focus + label,
.form-group input:not(:placeholder-shown) + label {
  top:-6px; left:0;
  font-size:0.75rem;
  color:var(--accent);
}

/* BUTTON */
.btn {
  width:100%;
  padding:16px;
  font-size:1rem;
  font-weight:600;
  border:none;
  border-radius:12px;
  background: linear-gradient(135deg, #d6bfa9, #c4a484);
  color:#fff;
  cursor:pointer;
  transition: all 0.3s;
  margin-top:12px;
}
.btn:hover { opacity:0.9; transform: translateY(-1px); }

/* SWITCH LINK */
.switch-link {
  margin-top:20px;
  text-align:center;
  font-size:0.9rem;
  color:var(--muted);
}
.switch-link a {
  color:var(--accent); font-weight:500; cursor:pointer;
  transition:0.3s;
}
.switch-link a:hover { text-decoration:underline; }

/* subtle background animation */
body::before {
  content:"";
  position:absolute; inset:0;
  background: radial-gradient(circle at 25% 25%, rgba(196,164,132,0.05), transparent 60%),
              radial-gradient(circle at 75% 75%, rgba(196,164,132,0.05), transparent 60%);
  background-size:200% 200%;
  animation: floatBg 20s linear infinite;
  z-index:-1;
}

@keyframes floatBg {
  0% { background-position:0% 0%, 100% 100%; }
  50% { background-position:50% 50%, 50% 50%; }
  100% { background-position:0% 0%, 100% 100%; }
}

@keyframes fadeIn {
  from {opacity:0; transform:translateY(25px);}
  to {opacity:1; transform:translateY(0);}
}
</style>
</head>
<body>

<div class="main-container">
  <div class="logo-id">
    <img src="https://roandbot.com/logo-main.png" alt="Ro&Bot™">
    <span>ID</span>
  </div>
  <div class="subtitle" id="formSubtitle">Login</div>

  <div class="step-indicator" id="stepIndicator"></div>
  <form id="authForm"></form>
  <div class="switch-link" id="switchText">
    Don’t have an account? <a onclick="switchMode()">Sign up</a>
  </div>
</div>

<script>
let isSignup = false;
let step = 1;

function switchMode(){
  isSignup = !isSignup;
  step = 1;
  document.getElementById('formSubtitle').textContent = isSignup ? "Sign Up" : "Login";
  renderStep();
}

function renderStep() {
  const form = document.getElementById('authForm');
  const indicator = document.getElementById('stepIndicator');

  let totalSteps = isSignup ? 3 : 2;

  // step dots
  indicator.innerHTML = "";
  for (let i=1; i<=totalSteps; i++) {
    const dot = document.createElement("div");
    dot.classList.add("step-dot");
    if (i === step) dot.classList.add("active");
    indicator.appendChild(dot);
  }

  if (step === 1) {
    form.innerHTML = `
      <div class="form-group">
        <input type="email" id="email" required placeholder="">
        <label for="email">Email</label>
      </div>
      <button type="button" class="btn" id="nextBtn">Next</button>
    `;
    document.getElementById('nextBtn').addEventListener('click', () => { step=2; renderStep(); });
  }
  else if (step === 2) {
    form.innerHTML = `
      <div class="form-group">
        <input type="password" id="password" required placeholder="Password">
        <label for="password">Password</label>
      </div>
      ${isSignup ? `<button type="button" class="btn" id="nextBtn">Next</button>` : `<button type="submit" class="btn">Login</button>`}
    `;
    if (isSignup) {
      document.getElementById('nextBtn').addEventListener('click', () => { step=3; renderStep(); });
    }
  }
  else if (step === 3 && isSignup) {
    form.innerHTML = `
      <div class="form-group">
        <input type="password" id="password" required placeholder="">
        <label for="password">Password</label>
      </div>
      <div class="form-group">
        <input type="password" id="confirm" required placeholder="">
        <label for="confirm">Confirm Password</label>
      </div>
      <button type="submit" class="btn">Sign Up</button>
    `;
  }

  // Submit handler to communicate with server.id.roandbot.com
  form.onsubmit = async (e) => {
    e.preventDefault();
    const email = document.getElementById('email').value;
    const password = document.getElementById('password').value;
    const confirm = isSignup && document.getElementById('confirm') ? document.getElementById('confirm').value : null;

    if(isSignup && password !== confirm) {
      alert("Passwords do not match!");
      return;
    }

    const endpoint = isSignup ? 'https://server.id.roandbot.com/signup' : 'https://server.id.roandbot.com/login';

    try {
      const res = await fetch(endpoint, {
        method:'POST',
        headers:{ 'Content-Type':'application/json' },
        body: JSON.stringify({ email, password })
      });

      const data = await res.json();
      if(res.ok) {
        alert(data.message || "Success!");
      } else {
        alert(data.error || "Login failed");
      }
    } catch(err) {
      alert("Server error: "+err.message);
    }
  }
}

// init
renderStep();
</script>

</body>
</html>
